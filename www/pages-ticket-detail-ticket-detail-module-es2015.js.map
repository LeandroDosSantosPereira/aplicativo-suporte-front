{"version":3,"sources":["./src/app/pages/ticket-detail/ticket-detail.page.html","./src/app/auth/comment.service.ts","./src/app/pages/ticket-detail/ticket-detail-routing.module.ts","./src/app/pages/ticket-detail/ticket-detail.module.ts","./src/app/pages/ticket-detail/ticket-detail.page.scss","./src/app/pages/ticket-detail/ticket-detail.page.ts"],"names":[],"mappings":"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","file":"pages-ticket-detail-ticket-detail-module-es2015.js","sourcesContent":["export default \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-menu-button></ion-menu-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title>Ticket Detalhe</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<!-- Inicio do Card -->\\r\\n<ion-content fullscreen=\\\"true\\\"> \\r\\n  <ion-card>\\r\\n    <ion-item>\\r\\n      <ion-avatar slot=\\\"start\\\">\\r\\n        <img [src]=\\\"ticketCards.photo\\\">\\r\\n      </ion-avatar>\\r\\n      <ion-label>\\r\\n        <h3>{{ticketCards.name}}</h3>\\r\\n        <p>{{ticketCards.date}}</p>\\r\\n      </ion-label>\\r\\n    </ion-item>  \\r\\n    <img [src]=\\\"ticketCards.image\\\" alt=\\\"ion\\\">\\r\\n    <ion-card-header>\\r\\n      <p>TICKET ID - {{ticketCards.id}}</p>\\r\\n      <ion-card-title>{{ticketCards.title}}</ion-card-title>\\r\\n    </ion-card-header>\\r\\n    <ion-card-content>\\r\\n      {{ticketCards.text}}\\r\\n    </ion-card-content>\\r\\n    <!-- Botões do card -->\\r\\n    <ion-footer>\\r\\n      <ion-row>\\r\\n        <ion-col center text-center>\\r\\n          <button (click)=\\\"approve()\\\">\\r\\n            <ion-icon class=\\\"icon\\\" name=\\\"thumbs-up\\\"></ion-icon>\\r\\n            <div>Aprovado</div>\\r\\n          </button>\\r\\n        </ion-col>\\r\\n        <ion-col center text-center>\\r\\n          <button (click)= \\\"disapprove()\\\">\\r\\n            <ion-icon class=\\\"icon\\\" name=\\\"thumbs-down\\\"></ion-icon>\\r\\n            <div>Desaprovado</div>\\r\\n          </button>\\r\\n        </ion-col>\\r\\n        <ion-col center text-center>\\r\\n          <!-- <button (click)=\\\"hideComment('commntDiv')\\\"> -->\\r\\n          <button>\\r\\n            <ion-icon class=\\\"icon\\\" name=\\\"chatbubbles\\\"></ion-icon>\\r\\n            <div>{{comments.length}} Comentários</div>\\r\\n          </button>\\r\\n        </ion-col>       \\r\\n      </ion-row>\\r\\n    </ion-footer>\\r\\n  </ion-card>\\r\\n<!-- Fim do card -->\\r\\n\\r\\n<!-- Início dos inputs de comentário e Botões de envio -->\\r\\n  <ion-item >\\r\\n    <ion-input placeholder=\\\"Digite seu comentário\\\"  [(ngModel)]=\\\"data.text\\\" name=\\\"text\\\" ></ion-input>\\r\\n    <div class=\\\"input--file\\\" >\\r\\n      <span>\\r\\n        <ion-icon class=\\\"icon\\\" name=\\\"camera\\\"></ion-icon>\\r\\n      </span>\\r\\n      <input (change)=\\\"handleInputChange($event)\\\" name=\\\"imageUrl\\\" type=\\\"file\\\" />\\r\\n    </div>\\r\\n\\r\\n    <button  (click)=\\\"createComment()\\\">\\r\\n      <ion-icon class=\\\"icon\\\" name=\\\"send\\\"></ion-icon>\\r\\n    </button>    \\r\\n  </ion-item>\\r\\n  <!-- Fim inputs de comentário e Botões de envio -->\\r\\n  \\r\\n  <!-- Card de Comentários -->\\r\\n  <div id=\\\"commntDiv\\\">\\r\\n    <ion-card  *ngFor=\\\"let comment of comments\\\">\\r\\n      <ion-item >\\r\\n        <ion-avatar slot=\\\"start\\\">\\r\\n          <img [src]=\\\"comment.photo\\\">\\r\\n        </ion-avatar>\\r\\n        <ion-label>\\r\\n          <h3>{{comment.name}}</h3>\\r\\n          <p>{{comment.date}}</p>\\r\\n        </ion-label>\\r\\n      </ion-item> \\r\\n      <div *ngIf=\\\"comment.image != null\\\">\\r\\n        <img [src]= \\\"link.urlconnection + comment.image\\\" alt=\\\"ion\\\">\\r\\n     </div>\\r\\n      <ion-card-content>\\r\\n        <h3 style=\\\"color: black;\\\">{{comment.text}}</h3>\\r\\n      </ion-card-content>    \\r\\n    </ion-card>\\r\\n  </div>\\r\\n</ion-content>\\r\\n\"","import { HttpClient, HttpErrorResponse, HttpHeaders } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { throwError } from 'rxjs/internal/observable/throwError';\r\nimport { catchError, map, retry } from 'rxjs/operators';\r\nimport { User } from '../models/User';\r\nimport { ConnectionUrl } from './connectionurl';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\n\r\n\r\nexport class CommentService {\r\n\r\n   //Recebe a url da classe ConnectionUrl\r\n   link: ConnectionUrl = new ConnectionUrl()\r\n   comments:any\r\n\r\n  //Concatena com a rota\r\n  private url = this.link.urlconnection + 'api/v1/comments';\r\n//   tickets: any\r\n\r\n  constructor(private http: HttpClient) { }\r\n\r\n  // Do this on service. But for this demo lets do here\r\n  token: any = localStorage.getItem('token');\r\n  headers: any = new HttpHeaders({\r\n    Authorization: 'Bearer ' + this.token\r\n  });\r\n\r\n  // Handle API errors\r\n  handleError(error: HttpErrorResponse) {\r\n    if (error.error instanceof ErrorEvent) {\r\n      // A client-side or network error occurred. Handle it accordingly.\r\n      console.error('An error occurred:', error.error.message);\r\n    } else {\r\n      // The backend returned an unsuccessful response code.\r\n      // The response body may contain clues as to what went wrong,\r\n      console.error(\r\n        `Backend returned code ${error.status}, ` +\r\n        `body was: ${error.error}`);\r\n    }\r\n    // return an observable with a user-facing error message\r\n    return throwError(\r\n      'Something bad happened; please try again later.');\r\n  };\r\n\r\n\r\n  // Http Options\r\n  httpOptions = {\r\n    headers: new HttpHeaders({\r\n      'Content-Type': 'application/json'\r\n    })\r\n  }\r\n\r\n  // Pega a lista de todos os comentários\r\n  getCommentsList() {\r\n    return new Promise(resolve => {\r\n      this.http.get(this.url,\r\n        { headers: this.headers }).subscribe(data => {\r\n          resolve(data);\r\n          // return data;\r\n        }, err => {\r\n          console.log(err);\r\n        });\r\n    });\r\n\r\n  }\r\n\r\n\r\n  //Método que cria um comentário\r\n  create(cmt: any) {\r\n    this.httpOptions.headers =\r\n      this.httpOptions.headers.set('Authorization', this.token);\r\n    return this.http.post(`${this.url}`, cmt, this.httpOptions);\r\n  }\r\n\r\n  // Busca um ticket pelo id\r\n  getCommentItem(id) {\r\n    return new Promise(resolve => {\r\n      this.http.get(this.url + '/' + id,\r\n        { headers: this.headers }).subscribe(data => {\r\n          resolve(data);\r\n          this.comments = data;\r\n        }, err => {\r\n          console.log(err);\r\n        });\r\n    });\r\n\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n\r\n}\r\n\r\n\r\n\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { TicketDetailPage } from './ticket-detail.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: TicketDetailPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class TicketDetailPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { TicketDetailPageRoutingModule } from './ticket-detail-routing.module';\r\n\r\nimport { TicketDetailPage } from './ticket-detail.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    TicketDetailPageRoutingModule\r\n  ],\r\n  declarations: [TicketDetailPage]\r\n})\r\nexport class TicketDetailPageModule {}\r\n","export default \"button {\\n  background-color: transparent;\\n}\\n\\n.icon {\\n  color: #919191;\\n  font-size: 20px;\\n}\\n\\nbutton:focus {\\n  box-shadow: 0 0 0 0;\\n  border: 0 none;\\n  outline: 0;\\n}\\n\\n.input--file {\\n  position: relative;\\n  color: #7f7f7f;\\n}\\n\\n.input--file input[type=file] {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  opacity: 0;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvdGlja2V0LWRldGFpbC9DOlxcVXNlcnNcXGxlYW5kXFxPbmVEcml2ZVxcRG9jdW1lbnRvc1xcRGV2ZWxvcG1lbnRcXGFwbGljYXRpdm8tdGhlLXN1cG9ydGUvc3JjXFxhcHBcXHBhZ2VzXFx0aWNrZXQtZGV0YWlsXFx0aWNrZXQtZGV0YWlsLnBhZ2Uuc2NzcyIsInNyYy9hcHAvcGFnZXMvdGlja2V0LWRldGFpbC90aWNrZXQtZGV0YWlsLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLDZCQUFBO0FDQ0o7O0FERUE7RUFDSSxjQUFBO0VBQ0EsZUFBQTtBQ0NKOztBREVBO0VBQ0ksbUJBQUE7RUFDQSxjQUFBO0VBQ0EsVUFBQTtBQ0NKOztBREdBO0VBQ0ksa0JBQUE7RUFDQSxjQUFBO0FDQUo7O0FER0U7RUFDRSxrQkFBQTtFQUNBLE1BQUE7RUFDQSxPQUFBO0VBQ0EsVUFBQTtBQ0FKIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvdGlja2V0LWRldGFpbC90aWNrZXQtZGV0YWlsLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbImJ1dHRvbiB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcclxufVxyXG5cclxuLmljb257XHJcbiAgICBjb2xvcjojOTE5MTkxO1xyXG4gICAgZm9udC1zaXplOiAyMHB4O1xyXG59XHJcblxyXG5idXR0b246Zm9jdXMgeyAgICBcclxuICAgIGJveC1zaGFkb3c6IDAgMCAwIDA7XHJcbiAgICBib3JkZXI6IDAgbm9uZTtcclxuICAgIG91dGxpbmU6IDA7XHJcbn0gXHJcblxyXG5cclxuLmlucHV0LS1maWxlIHtcclxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICAgIGNvbG9yOiAjN2Y3ZjdmO1xyXG4gIH1cclxuICBcclxuICAuaW5wdXQtLWZpbGUgaW5wdXRbdHlwZT1cImZpbGVcIl0ge1xyXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgdG9wOiAwO1xyXG4gICAgbGVmdDogMDtcclxuICAgIG9wYWNpdHk6IDA7XHJcbiAgfVxyXG4gICIsImJ1dHRvbiB7XG4gIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xufVxuXG4uaWNvbiB7XG4gIGNvbG9yOiAjOTE5MTkxO1xuICBmb250LXNpemU6IDIwcHg7XG59XG5cbmJ1dHRvbjpmb2N1cyB7XG4gIGJveC1zaGFkb3c6IDAgMCAwIDA7XG4gIGJvcmRlcjogMCBub25lO1xuICBvdXRsaW5lOiAwO1xufVxuXG4uaW5wdXQtLWZpbGUge1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIGNvbG9yOiAjN2Y3ZjdmO1xufVxuXG4uaW5wdXQtLWZpbGUgaW5wdXRbdHlwZT1maWxlXSB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiAwO1xuICBsZWZ0OiAwO1xuICBvcGFjaXR5OiAwO1xufSJdfQ== */\"","import { tick } from '@angular/core/testing';\r\nimport { CurrentUser } from './../../auth/currentuser';\r\nimport { FormatDate } from './../../auth/formatdate';\r\nimport { AuthService } from './../../auth/auth.service';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { TicketService } from '../../auth/ticket.service';\r\nimport { CommentService } from '../../auth/comment.service';\r\nimport { ConnectionUrl } from '../../auth/connectionurl';\r\n\r\n\r\n@Component({\r\n  selector: 'app-ticket-detail',\r\n  templateUrl: './ticket-detail.page.html',\r\n  styleUrls: ['./ticket-detail.page.scss'],\r\n})\r\nexport class TicketDetailPage implements OnInit {\r\n\r\n  ticketId: number\r\n  ticket: any\r\n  user: any\r\n  ticketCards: any = { id: '', title: '', name: '', created_at: '', photo: '', image: '', text: '' }\r\n  data: any = { text: '', ticket_id: '' }\r\n  comment: any\r\n  formatDate: FormatDate = new FormatDate()\r\n  link: ConnectionUrl = new ConnectionUrl()\r\n  imageSrc: string = ''\r\n  img: string = ''\r\n  current: CurrentUser = new CurrentUser()\r\n  id: number\r\n  commentdata: any\r\n  users: any\r\n  comments = new Array<any>()\r\n  getComments: any\r\n\r\n  constructor(\r\n\r\n    public ticketService: TicketService,\r\n    private route: ActivatedRoute,\r\n    public authService: AuthService,\r\n    public commentService: CommentService\r\n\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.createCardTickets()    \r\n  }\r\n\r\n  //Cria o Ticket de cards na view\r\n  createCardTickets() {\r\n    // Recebe o id vindo da url \r\n    this.ticketId = parseInt(this.route.snapshot.paramMap.get('id'))\r\n    //Pega o id logado para cadastrar o comentário\r\n    this.id = this.current.getUser()\r\n    // Chama a função da classe ticketService que retorna o ticket pelo id \r\n    this.ticketService.getItemTicket(this.ticketId).then(response => {\r\n      this.ticket = response            \r\n      // Chama a função da classe ticketService que retorna o usuário pelo id \r\n      this.authService.getItem(this.ticket.user_id).then(response => {\r\n        this.user = response;\r\n\r\n        //Seta valores no objeto ticketCards do card da View \r\n        this.ticketCards = {\r\n          photo: this.link.urlconnection + this.user.photo.url,\r\n          name: this.user.name,\r\n          id: this.ticket.id,\r\n          title: this.ticket.title,\r\n          text: this.ticket.text,\r\n          date: this.formatDate.format(this.ticket.created_at),\r\n          image: this.link.urlconnection + Object.values(this.ticket.image)[0]\r\n\r\n        }\r\n      })\r\n\r\n    })\r\n\r\n  }\r\n\r\n  async ionViewWillEnter(){     \r\n     // Limpa a lista\r\n     this.comments = new Array<any>()\r\n     // Pega a lista de comentários da classe CommentService\r\n     this.commentService.getCommentsList().then(response => {\r\n       this.commentdata = response;\r\n       // Laço do tamanho da lista de tickets chama o metodo getItem da classe authService buscando o usuário pelo id \r\n       for (let i = 0; i < this.commentdata.length; i++) {\r\n         this.authService.getItem(this.commentdata[i].user_id).then(response => {\r\n           this.users = response;\r\n           //     // Compara se o usuário logado está no ticket como remetente ou destinatário do ticket\r\n           if (this.ticketId == Object.values(this.commentdata[i])[2]) {\r\n             // console.log(Object.values(this.commentdata[i])[5])             \r\n             // Seta valores no objeto ticket\r\n             this.getComments = {\r\n               photo: this.link.urlconnection + this.users.photo.url,\r\n               name: this.users.name,\r\n               image: this.commentdata[i].image.url,\r\n               text: this.commentdata[i].text,\r\n               date: this.formatDate.format(this.commentdata[i].created_at)\r\n             }\r\n             // Adiciona o objeto getComments no Array\r\n             this.comments.push(this.getComments)\r\n           }\r\n         })\r\n       }\r\n \r\n     })\r\n     console.log(this.comments)       \r\n  }\r\n \r\n\r\n  //Método que pega imagem do input file e convete em base 64 e guarda na variável imageSrc \r\n  handleInputChange(e) {\r\n    var file = e.dataTransfer ? e.dataTransfer.files[0] : e.target.files[0];\r\n    var pattern = /image-*/;\r\n    var reader = new FileReader();\r\n    if (!file.type.match(pattern)) {\r\n      alert('Formato inválido');\r\n      return;\r\n    }\r\n    reader.onload = this._handleReaderLoaded.bind(this);\r\n    reader.readAsDataURL(file);\r\n  }\r\n  _handleReaderLoaded(e) {\r\n    let reader = e.target;\r\n    this.imageSrc = reader.result;\r\n    this.img = this.imageSrc;\r\n  }\r\n\r\n\r\n  //Metodo para cadastrar comentário\r\n  createComment() {\r\n    // Cria um objeto Comment\r\n    this.comment = {\r\n      comment: {\r\n        ticket_id: this.ticket.id,\r\n        text: this.data.text,\r\n        image: this.img,\r\n        user_id: this.id\r\n      }\r\n    };\r\n    // Envia o objeto ticket para o método create da classe ticketService\r\n    this.commentService.create(this.comment).subscribe(\r\n      async () => {\r\n        this.ionViewWillEnter()       \r\n        // alert(\"Comentário salvo!!\")\r\n      },\r\n    );\r\n\r\n    this.data = { text: '', ticket_id: '' } \r\n    //fINAL\r\n  }\r\n\r\n  // Esconde comentários\r\n  // hideComment(el) {\r\n\r\n  //   let display = document.getElementById(el).style.display;\r\n\r\n  //   if (display == \"none\") {\r\n  //     document.getElementById(el).style.display = 'block';\r\n  //   }\r\n  //   else {\r\n  //     document.getElementById(el).style.display = 'none';\r\n  //     console.log(\"Fechou\")\r\n  //   }\r\n\r\n  // }\r\n\r\n  approve(){\r\n    this.ticket.approval = true\r\n    //  Envia o id e o usuário para o método updateItem para a classe authService\r\n     this.ticketService.updateItem(this.ticketId, this.ticket ).subscribe(response => {     \r\n      console.log(this.ticket)\r\n      alert(\"Curtiu\")\r\n    })   \r\n  }\r\n\r\n  disapprove(){\r\n    this.ticket.approval = false\r\n    //Envia o id e o usuário para o método updateItem para a classe authService\r\n    this.ticketService.updateItem(this.ticketId, this.ticket ).subscribe(response => {     \r\n     console.log(this.ticket)\r\n     alert(\"Não curtiu\")\r\n   })   \r\n  }\r\n\r\n}\r\n\r\n\r\n"],"sourceRoot":"webpack:///"}